
// Test data here

test_data = [
    [58,204069,81,15490,0,111,2.23,698,144,3.14,224,546,0.468769482827915,1,1],
    [68,288317,0,14194,1206,0,0,838,126,4.79,166,0,0.240702673781548,1,0],
    [65,217993,1,17526,1847,85,0,946,144,4.61,15,4014,0.361899679632608,1,0],
    [65,177232,33,9901,0,0,1.75,782,151,4.94,213,6119,0.456487743065231,1,1],
    [73,93177,14,11238,2736,53,2.5,400,146,4.8,15,5539,0.320341657801277,1,0],
    [31,240496,55,4810,0,135,8.3,0,130,5.1,145,2700,0.159380784984293,0,0],
    [64,219931,0,3997,1120,30,7.26,211,147,4.03,147,4150,0.378483471735664,1,0],
    [74,1000,94,12275,2459,85,0,995,123,3.75,145,4618,0.386855311756305,1,0],
    [60,167263,61,9258,1744,116,7,757,131,3.04,274,2331,0.579439425194314,1,1],
    [86,305063,15,0,875,252,0,509,154,2.86,280,2554,0.553061235647368,1,1],
    [44,292660,159,1654,0,105,0,1770,123,5.94,358,1317,0.460157488283191,1,1],
    [56,219899,86,10405,0,35,0,748,149,4.46,122,3243,0.271055979217777,1,0],
    [63,85658,62,1989,0,0,5.63,245,130,2,244,1432,0.261200232840935,1,0],
    [83,258793,141,7856,2015,116,0,512,125,3,50,185,0.178514789309522,1,0],
    [84,7690,146,8082,0,0,0,332,147,4.03,170,0,0.346694806684559,1,0],
    [32,433228,69,1750,4299,0,5.13,841,135,3.65,139,0,0.0818099485437568,0,0],
    [84,290741,34,6129,4125,10,0,1023,118,5.41,15,0,0.175197199514425,1,0],
    [62,402569,32,4397,293,36,0,79,137,4.19,152,3408,-0.0213554856593463,0,0],
    [82,244924,0,17392,1815,33,9.57,45,142,4.23,15,1781,0.505863712817489,1,1],
    [83,21275,23,9929,0,375,3.46,642,142,3.23,85,2185,0.750256385093499,1,1],
    [46,324284,71,10560,3307,0,0,546,151,4.29,173,0,0.122291613722272,0,0],
    [57,197951,186,12693,1646,0,0.37,679,129,4.19,47,102,0.0851428714211801,0,0],
    [43,29543,59,7579,1143,145,3.79,446,143,3.42,112,987,0.293856126794024,1,0],
    [78,1000,101,1481,0,17,0,494,137,4.04,221,2816,0.294414740926476,1,0],
    [36,515387,200,7596,2508,120,0,872,148,5.13,180,3101,0.173799054101667,1,0],
    [62,292397,45,10963,3442,0,0,410,136,3.96,217,0,0.127146849459903,0,0],
    [38,364530,175,8117,2563,213,0,0,131,4.18,223,0,-0.0266912832588619,0,0],
    [55,270840,97,11885,3224,196,1.11,284,130,2.75,93,2053,0.122096915508442,0,0],
    [59,355291,65,4131,5109,321,5.07,934,114,2.56,213,7525,0.450322726208858,1,1],
    [77,525795,94,10851,4506,216,0,33,131,4.18,216,0,0.18142458174259,1,0],
    [31,205814,0,7001,4667,78,0,348,129,4.55,153,4504,-0.108244351049357,0,0],
    [38,299126,0,3187,2702,175,0.71,682,135,2.93,138,3101,0.0909759279781054,0,0],
    [75,258270,198,0,0,95,1.52,300,124,3.71,41,0,0.0649843556975006,0,0],
    [39,1000,60,3352,4516,137,9.06,540,144,4.03,128,0,0.456199354370243,1,1],
    [51,295696,134,0,0,56,7.02,307,145,3.68,26,4661,0.201919254837386,1,0],
    [36,186830,84,14213,3811,180,9.21,522,138,4.53,62,1605,0.441022925781494,1,1],
    [41,277157,62,1747,0,0,0.98,311,157,3.96,193,3988,0.079129782476356,0,0],
    [38,195625,45,9369,22,0,0,240,150,3.58,176,3973,0.026738629213861,0,0],
    [59,244485,0,9843,607,0,3.22,541,136,5.94,179,21,0.28766229441039,1,0],
    [68,203927,51,9095,5128,211,10.51,564,130,3.28,282,732,0.740915956536254,1,1],
    [62,130913,200,0,1030,60,5.29,473,120,2.68,57,2794,0.144791374543111,0,0],
    [86,322810,142,11451,2946,20,0,611,147,4.4,67,0,0.314145802455848,1,0],
    [55,1000,0,0,0,44,2.69,417,133,4.95,222,5253,0.232916367020022,1,0],
    [92,122374,121,1295,858,0,3.42,838,106,3.03,184,2301,0.327810049813325,1,0],
    [59,287834,141,9110,1150,189,3.63,618,145,5.66,111,4375,0.450582784462167,1,1],
    [48,82145,0,17358,1851,91,1.47,126,141,4.53,362,6239,0.33122463673537,1,0],
    [82,216224,149,5983,1549,0,7.4,1395,161,3.75,164,0,0.891671619015712,1,1],
    [49,276163,6,0,2167,0,0,797,143,5.74,267,1766,0.181294577963474,1,0],
    [65,227863,0,2937,1091,164,3.24,421,141,2.49,156,4355,0.335970211742765,1,0],
    [70,409991,86,0,4830,0,1.15,800,154,3.66,85,5485,0.22080783032696,1,0],
    [52,157382,81,14778,3198,0,3.18,1095,121,3.69,15,0,0.212820970270378,1,0],
    [26,204487,31,0,0,174,0.27,563,130,4.05,98,1686,-0.0530707012081955,0,0],
    [61,86270,0,13834,0,36,0.31,788,135,3.24,218,0,0.346528443635288,1,0],
    [54,326335,4,8044,619,184,0,875,128,3.2,78,0,0.188226121659979,1,0],
    [46,126894,86,9707,671,106,3.43,178,136,3.65,164,4684,0.187913977302538,1,0],
    [62,152742,63,15152,0,28,0,650,157,4.79,183,2125,0.417726224520253,1,1],
    [66,161709,123,15254,0,97,10.34,898,124,3.11,148,444,0.699379457233891,1,1],
    [57,325278,0,853,1465,21,0,398,138,3.09,85,0,-0.0433888428905689,0,0],
    [37,106053,60,9465,2538,38,0,473,129,2.47,242,1983,0.0207726850459751,0,0],
    [37,187536,165,15051,5367,81,5.13,221,126,5.97,130,541,0.125904278695074,0,0],
    [60,333063,0,11241,4025,48,4.21,478,149,4.78,117,4748,0.336237346179154,1,0],
    [57,277065,134,0,1925,111,4.41,355,145,5.03,333,2153,0.399092132128318,1,1],
    [66,253796,56,1285,0,184,0,655,130,3.57,252,4073,0.30036682698447,1,0],
    [49,348189,130,3484,1080,185,0,315,142,3.56,45,2997,0.0289236144507018,0,0],
    [63,194668,25,3371,0,74,1.24,838,157,5.03,125,2645,0.421723434730222,1,1],
    [45,148703,0,6506,601,163,0,510,157,2.68,211,3412,0.302320297105575,1,0],
    [68,33663,151,788,3735,0,4.84,78,126,4.97,110,3346,0.120307251945587,0,0],
    [84,466586,45,0,2321,38,5.69,482,143,3.94,111,271,0.371382674243907,1,0],
    [56,551062,82,10228,2225,92,3,172,116,1.8,33,2389,-0.117539231705406,0,0],
    [44,479536,165,2527,3938,0,1.03,729,130,4.43,292,0,0.0473830368058047,0,0],
    [55,331994,0,10450,970,0,0,884,131,3.34,165,4320,0.150165593373735,0,0],
    [59,225489,127,4743,939,160,0.39,791,136,2.44,94,5090,0.237949442902342,1,0],
    [39,176909,68,8329,4521,185,4.08,700,142,5.55,83,5543,0.327119491145968,1,0],
    [82,335425,87,4861,274,132,10.88,74,147,3.41,327,3912,0.74878588582468,1,1],
    [44,121240,0,13945,243,0,10.24,856,148,3.11,120,2379,0.603491038455833,1,1],
    [56,345023,122,12371,0,117,0.44,234,142,2.66,81,964,0.101456258341919,0,0],
    [45,280093,0,4008,1553,180,0,304,125,4.19,90,0,-0.0479308418396574,0,0],
    [39,412110,73,16204,0,101,1.77,1339,148,2.52,184,0,0.449097029180079,1,1],
    [75,179487,27,5993,217,56,2.59,373,154,2.83,134,2353,0.385902985572479,1,0],
    [65,265890,221,4872,4690,256,0,595,133,4.43,125,3048,0.26648711344252,1,0],
    [55,117261,68,12604,1157,25,10.52,865,127,4.25,85,0,0.551534166594999,1,1],
    [50,108871,114,9062,0,108,2.91,1050,130,3.89,210,106,0.431608177357135,1,1],
    [27,267446,138,12143,0,149,1.26,376,154,5.16,48,5319,0.119194718128009,0,0],
    [69,346998,82,2395,0,97,4.45,258,141,4.08,196,0,0.327531232241799,1,0],
    [58,321018,32,0,7015,0,0,517,169,5.17,215,2043,0.225074785622333,1,0],
    [41,204760,244,8323,1005,84,7.02,627,126,3.08,136,798,0.276497480622355,1,0],
    [68,410993,62,5395,0,179,7.38,1256,138,4.15,172,4972,0.738281316449538,1,1],
    [36,262231,0,15315,3141,35,10.51,191,157,3.34,92,4722,0.403267980210311,1,1],
    [45,267887,0,7645,1925,0,6.53,601,134,4.32,214,1446,0.300170414032721,1,0],
    [67,252362,0,11486,0,113,0,255,144,3.52,168,2329,0.249988719279506,1,0],
    [72,93116,80,5354,0,31,5.68,899,126,3.88,294,2214,0.573591333466326,1,1],
    [56,245616,3,0,0,0,0,460,128,4.33,110,0,-0.0517707342557383,0,0],
    [59,379471,122,8147,2780,103,3.56,641,130,3.9,156,3884,0.266826044540392,1,0],
    [71,168368,0,13631,680,182,10.21,263,153,4.15,114,1132,0.759612504502499,1,1],
    [60,274867,52,2416,0,45,5.71,1116,144,5.36,75,1908,0.489510609597137,1,1],
    [58,52749,147,11545,2511,45,0.72,96,129,3.26,177,6376,0.0737234411842863,0,0],
    [50,206465,75,10021,2483,53,0.69,897,139,4.95,104,1910,0.231701586659535,1,0],
    [47,295966,12,16626,4314,128,0,1373,154,5.04,354,1667,0.6381794700257,1,1],
    [52,206616,29,23032,3742,176,0,0,150,3.79,104,1641,0.205671846368305,1,0],
    [29,303903,28,6989,966,18,4.03,523,135,4.58,154,3821,0.0691419028487963,0,0]
];
test_data_json = [];
test_data_ovt_predictions = [];
test_data_unt_predictions = [];

for(test_values of test_data){
    test_data_json.push({"Age":test_values[0],
			 "Platelets (x10^6/L)":test_values[1],
			 "Eosinophils (x10^6/L)":test_values[2],
			 "Neutrophils  (x10^6/L)":test_values[3],
			 "Monocytes  (x10^6/L)":test_values[4],
			 "C-Reactive Protein (mg/L)":test_values[5],
			 "Creatinine (mg/dL)":test_values[6],
			 "Lactate Dehydrogenase (U/L)":test_values[7],
			 "Sodium (Natremia; mmol/L)":test_values[8],
			 "Potassium (Kalemia; mmol/L)":test_values[9],
			 "Glucose (mg/dL)":test_values[10],
			 "D-dimer (ng/mL)":test_values[11]});
    
    test_data_ovt_predictions.push({"binary_prediction":""+test_values[13]});
    test_data_unt_predictions.push({"binary_prediction":""+test_values[14]});
}

function test_predictions_ovt(){
    failures = [];
    failures_num = [];
    i = 0;
    for(const tp of tableOvt_Output.getData()){
	if (tp["Binary Prediction"] != test_data_ovt_predictions[i]["binary_prediction"]){
	    failures.push(tp);
	    failures_num.push(i);
	}
	    i+=1;
    }
    return [failures, failures_num];
}

function test_predictions_unt(){
    failures = [];
    failures_num = [];
    i = 0;
    for(const tp of tableOvt_Output.getData()){
	if (tp["Binary Prediction"] != test_data_unt_predictions[i]["binary_prediction"]){
	    failures.push(tp);
	    failures_num.push(i);
	}
	    i+=1;
    }
    return [failures, failures_num];
}

function load_test_data(){
    patientDataTable_Ovt.clearData();
    patientDataTable_Ovt.setData(test_data_json);
}

function load_specific_test_data(indices){
    test_data_json_chosen = [];
    for(index of indices){
	test_data_json_chosen.push(test_data_json[index]);
    }
    patientDataTable_Ovt.clearData();
    patientDataTable_Ovt.setData(test_data_json_chosen);

}
